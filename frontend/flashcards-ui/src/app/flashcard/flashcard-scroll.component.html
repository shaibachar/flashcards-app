<div class="scroll-wrapper" *ngIf="flashcards.length">
  <ng-container *ngFor="let card of flashcards">
    <div
      class="scroll-card"
  (pointerdown)="onPointerStart($event, card)"
  (pointerup)="onPointerEnd($event, card)"
  (pointercancel)="onPointerCancel($event)"
  (pointerleave)="onPointerCancel($event)"
    >
      <section class="qa-section question" *ngIf="!card.showAnswer">
        <img
          *ngIf="card.questionImage"
          [src]="apiUrl + '/images/' + card.questionImage"
          class="flashcard-image"
          alt="question image"
        />
        <pre class="card-text question-text">{{ card.question }}</pre>
      </section>

      <section class="qa-section answer" *ngIf="card.showAnswer">
        <app-flashcard-answer
          [answer]="card.answer"
          [image]="card.answerImage || ''"
        ></app-flashcard-answer>
        <div *ngIf="card.explanation" class="alert alert-info text-start mt-3">
          <img
            *ngIf="card.explanationImage"
            [src]="apiUrl + '/images/' + card.explanationImage"
            class="flashcard-image"
            alt="explanation image"
          />
          {{ card.explanation }}
        </div>
      </section>

      <div class="d-flex justify-content-center align-items-center flex-wrap mt-3 gap-2">
        <button class="btn btn-success" (click)="vote(card, true)">👍</button>
        <button class="btn btn-danger" (click)="vote(card, false)">👎</button>
        <button class="btn btn-warning" (click)="readAloud(card)">🔊 Voice</button>
        <button class="btn btn-outline-secondary" (click)="editCard(card)">✏️ Edit</button>
        <div class="vote-stats text-muted">
          👍 {{ card.stats?.up ?? 0 }} · 👎 {{ card.stats?.down ?? 0 }}
        </div>
      </div>
      <div class="text-center text-muted mt-2 small">Swipe right 👍, left 👎, up 🔄</div>
    </div>
  </ng-container>
</div>
