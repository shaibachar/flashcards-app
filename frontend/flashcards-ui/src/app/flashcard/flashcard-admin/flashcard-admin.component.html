<app-menu></app-menu>

<div class="container-fluid mt-4">
    <h2>Manage Flashcards</h2>

    <div class="mb-3">
        <a class="btn btn-outline-secondary" routerLink="/bulk-import">Bulk Import Flashcards</a>
    </div>

    <div class="mb-3">
        <input class="form-control" placeholder="Filter by question" [(ngModel)]="filterText" (input)="applyFilter()" />
    </div>
    <div class="mb-3">
        <input class="form-control" placeholder="Filter by deck" [(ngModel)]="filterDeck" (input)="applyFilter()" />
    </div>

    <form (ngSubmit)="saveFlashcard()" class="mb-4">
        <input class="form-control mb-2" placeholder="Question" [(ngModel)]="newFlashcard.question" name="question"
            required />
        <textarea class="form-control mb-2" rows="3" placeholder="Answer" [(ngModel)]="newFlashcard.answer"
            name="answer" required></textarea>
        <textarea class="form-control mb-2" rows="3" placeholder="Explanation" [(ngModel)]="newFlashcard.explanation"
            name="explanation"></textarea>
        <input class="form-control mb-2" placeholder="Deck ID" [(ngModel)]="newFlashcard.deckId" name="deckId" />
        <input class="form-control mb-2" placeholder="Topic" [(ngModel)]="newFlashcard.topic" name="topic" />
        <button class="btn btn-primary" type="submit">{{ newFlashcard.id ? 'Update' : 'Add' }}</button>
    </form>

    <div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>
                  Question
                  <button class="btn btn-link p-0" (click)="sortTable('question', 'asc')">▲</button>
                  <button class="btn btn-link p-0" (click)="sortTable('question', 'desc')">▼</button>
                </th>
                <th>
                  Topic
                  <button class="btn btn-link p-0" (click)="sortTable('topic', 'asc')">▲</button>
                  <button class="btn btn-link p-0" (click)="sortTable('topic', 'desc')">▼</button>
                </th>
                <th>
                  Deck
                  <button class="btn btn-link p-0" (click)="sortTable('deckId', 'asc')">▲</button>
                  <button class="btn btn-link p-0" (click)="sortTable('deckId', 'desc')">▼</button>
                </th>
                <th>
                  Actions
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let card of filtered">
                <td>{{ card.question }}</td>
                <td>{{ card.topic }}</td>
                <td>{{ card.deckId }}</td>
                <td>
                    <button class="btn btn-sm btn-outline-primary me-2" (click)="edit(card)">Edit</button>
                    <button class="btn btn-sm btn-outline-danger" (click)="delete(card)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
    </div>
</div>